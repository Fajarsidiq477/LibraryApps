<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Sijambu | Books</title>
        <!-- Bootstrap CDN-->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
            crossorigin="anonymous"
        />
    </head>
    <body>
        <nav>
            <div class="navbar navbar-upper bg-primary py-2">
                <div class="container">
                    <a class="navbar-brand text-light" href="#">Navbar</a>

                    <div class="col-md-6 d-none d-md-flex">
                        <div class="input-group p-2">
                            <button
                                class="btn dropdown-toggle bg-secondary text-light"
                                type="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >
                                Kategori
                            </button>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item" href="#"
                                        >Action before</a
                                    >
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#"
                                        >Another action before</a
                                    >
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#"
                                        >Something else here</a
                                    >
                                </li>
                                <li><hr class="dropdown-divider" /></li>
                                <li>
                                    <a class="dropdown-item" href="#"
                                        >Separated link</a
                                    >
                                </li>
                            </ul>
                            <input
                                type="text"
                                class="form-control"
                                aria-label="Text input with 2 dropdown buttons"
                                placeholder="Pencarian ...."
                            />
                            <button
                                class="btn bg-secondary text-light"
                                type="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >
                                <i data-feather="search"></i>
                            </button>
                        </div>
                    </div>

                    <div class="d-flex dropdown px-2" role="search">
                        <a
                            class="nav-link d-flex justify-content-between align-items-center"
                            href="#"
                            role="button"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                        >
                            <div class="avatar">
                                <img
                                    src="https://placehold.co/200"
                                    alt="avatar"
                                    class="img-fluid"
                                    width="50px"
                                />
                            </div>

                            <div class="col text-center">
                                <i data-feather="menu"></i>
                            </div>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a class="dropdown-item" href="#">Akun</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">Keluar</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="navbar navbar-lower bg-secondary">
                <div class="container">
                    <div
                        class="d-flex justify-content-between align-items-center"
                        style="width: 100%"
                    >
                        <ul class="navbar-nav flex-row">
                            <li class="nav-item">
                                <a
                                    class="nav-link px-md-4"
                                    aria-current="page"
                                    href="#"
                                >
                                    <i data-feather="home"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                    class="nav-link px-md-4"
                                    href="/admin/books.html"
                                >
                                    <i data-feather="book"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                    class="nav-link px-md-4 active"
                                    href="/admin/users.html"
                                >
                                    <i data-feather="user"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link px-md-4" href="#">
                                    <i data-feather="clock"></i>
                                </a>
                            </li>
                        </ul>
                        <div>
                            <a
                                href="#"
                                class="badge bg-primary d-none d-md-block btn-add-account"
                                style="text-decoration: none"
                                data-bs-toggle="modal"
                                data-bs-target="#myModal"
                                data-bs-mode="add"
                            >
                                <span>Tambah Akun</span>
                                <i data-feather="plus"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile appearance -->
            <div class="container">
                <div class="searchbar-mobile d-md-none input-group py-2">
                    <button
                        class="btn dropdown-toggle bg-secondary text-light"
                        type="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                    >
                        Kategori
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <a class="dropdown-item" href="#">Action before</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#"
                                >Another action before</a
                            >
                        </li>
                        <li>
                            <a class="dropdown-item" href="#"
                                >Something else here</a
                            >
                        </li>
                        <li><hr class="dropdown-divider" /></li>
                        <li>
                            <a class="dropdown-item" href="#">Separated link</a>
                        </li>
                    </ul>
                    <input
                        type="text"
                        class="form-control"
                        aria-label="Text input with 2 dropdown buttons"
                        placeholder="Pencarian ...."
                    />
                    <button
                        class="btn bg-secondary text-light"
                        type="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                    >
                        <i data-feather="search"></i>
                    </button>
                </div>

                <div class="mt-2">
                    <a
                        href="#"
                        class="badge bg-primary d-block d-md-none py-2"
                        style="text-decoration: none"
                        data-bs-toggle="modal"
                        data-bs-target="#myModal"
                        data-bs-mode="add"
                    >
                        <span>Tambah Akun</span>
                        <i data-feather="plus"></i>
                    </a>
                </div>
            </div>
            <!-- End mobile appearance -->
        </nav>

        <main>
            <div class="container">
                <div class="row table-responsive">
                    <table class="table text-center">
                        <thead>
                            <tr>
                                <th class="py-4">
                                    <input type="checkbox" name="" id="" />
                                </th>
                                <th class="py-4">#</th>
                                <th class="py-4">NIM</th>
                                <th class="py-4">Nama Lengkap</th>
                                <th class="py-4">Role</th>
                                <th class="py-4">Nomor HP</th>
                                <th class="py-4">Denda</th>
                                <th class="py-4">#</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="align-middle">
                                <td>
                                    <input type="checkbox" name="" id="" />
                                </td>
                                <td>1</td>
                                <td>2010031</td>
                                <td>Fajar Sidik Setiawan</td>
                                <td>Anggota</td>
                                <td>0819-1051-4970</td>
                                <td>0</td>
                                <td>
                                    <a
                                        href="#"
                                        class="badge bg-success"
                                        data-bs-toggle="modal"
                                        data-bs-target="#myModal"
                                        data-bs-mode="edit"
                                        data-bs-id="1"
                                    >
                                        <i data-feather="edit"></i>
                                    </a>

                                    <a
                                        href="#"
                                        class="badge bg-danger"
                                        onclick="deleteData(1)"
                                    >
                                        <i data-feather="trash"></i>
                                    </a>
                                </td>
                            </tr>

                            <tr class="align-middle">
                                <td>
                                    <input type="checkbox" name="" id="" />
                                </td>
                                <td>2</td>
                                <td>2010031</td>
                                <td>Fajar Sidik Setiawan</td>
                                <td>Anggota</td>
                                <td>0819-1051-4970</td>
                                <td>0</td>
                                <td>
                                    <a
                                        href="#"
                                        class="badge bg-success"
                                        data-bs-toggle="modal"
                                        data-bs-target="#myModal"
                                        data-bs-mode="edit"
                                        data-bs-id="2"
                                    >
                                        <i data-feather="edit"></i>
                                    </a>

                                    <a
                                        href="#"
                                        class="badge bg-danger"
                                        onclick="deleteData(1)"
                                    >
                                        <i data-feather="trash"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>

                        <!-- Alert query pencarian tidak ada -->
                        <!-- <tbody>
                            <tr>
                                <td colspan="7" class="py-5 text-danger">
                                    <h4>
                                        Buku dengan kata kunci "[query]" tidak
                                        ditemukan!
                                    </h4>
                                </td>
                            </tr>
                        </tbody> -->
                    </table>
                </div>
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-end">
                        <li class="page-item disabled">
                            <a class="page-link">Previous</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">2</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">3</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </main>

        <!-- Add / Edit Modal -->
        <div
            class="modal fade"
            id="myModal"
            tabindex="-1"
            aria-labelledby="myModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-xl modal-fullscreen-lg-down">
                <div
                    class="modal-content"
                    style="border: 3px solid red; min-height: 100vh"
                >
                    <div class="modal-header bg-secondary">
                        <button
                            type="button"
                            class="btn-admin-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        >
                            <i data-feather="chevron-left"></i>
                        </button>
                        <h1
                            class="modal-title fs-5 text-light"
                            id="myModalLabel"
                        ></h1>
                    </div>
                    <div class="modal-body py-4 px-2 px-sm-3 px-md-5">
                        <form action="#" id="form-modal">
                            <input type="text" id="form-mode" hidden />
                            <input type="text" id="id" hidden />
                            <div class="row">
                                <div class="col-12 col-md-6 text-center">
                                    <div class="image-cover">
                                        <img
                                            src="http://placehold.co/160x225"
                                            alt="book cover"
                                            id="imageInputDisplay"
                                            style="width: 160px; height: 225px"
                                        />
                                        <input
                                            type="file"
                                            name=""
                                            id="imageInput"
                                            accept="image/*"
                                            hidden
                                        />
                                        <label
                                            for="imageInput"
                                            class="btn btn-success rounded-circle image-cover-button"
                                        >
                                            <i data-feather="edit"></i>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="nim" class="mb-2"
                                            >NIM/NIP</label
                                        >
                                        <input
                                            type="text"
                                            class="form-control custom-form-control is-invalid"
                                            id="nim"
                                        />
                                        <div class="invalid-feedback">
                                            NIM tidak boleh lebih dari 16
                                        </div>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="namaLengkap" class="mb-2"
                                            >Nama Lengkap</label
                                        >
                                        <input
                                            type="text"
                                            class="form-control custom-form-control"
                                            id="namaLengkap"
                                        />
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="email" class="mb-2"
                                            >E-Mail</label
                                        >
                                        <input
                                            type="email"
                                            class="form-control custom-form-control"
                                            id="email"
                                        />
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="handphone" class="mb-2"
                                            >Nomor Handphone</label
                                        >
                                        <input
                                            type="number"
                                            class="form-control custom-form-control"
                                            id="handphone"
                                        />
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="role" class="mb-2"
                                            >Role</label
                                        >
                                        <select
                                            name="role"
                                            id="role"
                                            class="form-select custom-form-control"
                                        >
                                            <option value="">Anggota</option>
                                            <option value="">Admin</option>
                                        </select>
                                    </div>

                                    <div class="form-group mb-3 text-end">
                                        <button
                                            type="submit"
                                            class="btn btn-dark"
                                        >
                                            Selesai
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Add / Edit Modal -->

        <!-- Bootstrap CDN -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"
        ></script>

        <!-- Icons -->
        <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

        <!-- SweetAlert for deleteconfirmation -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

        <script>
            // icons
            feather.replace();

            //delete confirmation
            const deleteData = (id) => {
                swal({
                    text: "Setelah data dihapus, Anda tidak akan bisa melihatnya kembali. Apakah Anda yakin?",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                }).then((willDelete) => {
                    if (willDelete) {
                        swal("Data berhasil dihapus!", {
                            icon: "success",
                        });

                        // Script jika data dihapus di bawah sini
                    } else {
                        swal("Data tidak dihapus!");
                    }
                });
            };

            // Ketika input file image menerima uploadan
            const imageInput = document.querySelector("#imageInput");
            const imageInputDisplay =
                document.querySelector("#imageInputDisplay");

            imageInput.addEventListener("change", function () {
                const image = this.files[0];

                const reader = new FileReader();
                reader.readAsDataURL(image);
                reader.onload = () => {
                    imageInputDisplay.setAttribute("src", reader.result);
                };
            });

            // bs.modal.show triggered
            const myModal = new bootstrap.Modal("#myModal");
            const formModal = myModal._element.querySelector("#form-modal");
            let formMode = formModal.querySelector("#form-mode");

            if (myModal._element) {
                myModal._element.addEventListener("show.bs.modal", (event) => {
                    formModal.reset();
                    imageInputDisplay.src = "http://placehold.co/165x225";

                    // Button that triggered the modal
                    const button = event.relatedTarget;
                    // Extract info from data-bs-* attributes
                    const mode = button.getAttribute("data-bs-mode");
                    // If necessary, you could initiate an Ajax request here
                    // and then do the updating in a callback.

                    // Update the modal's content.
                    const modalTitle =
                        myModal._element.querySelector(".modal-title");

                    if (mode === "add") {
                        modalTitle.innerText = "Tambahkan Akun";
                    }

                    if (mode === "edit") {
                        modalTitle.innerText = "Edit Akun";
                        const id = button.getAttribute("data-bs-id");

                        formModal.querySelector("#id").value = id;
                    }

                    formMode.value = mode;
                });
            }

            // when form-modal on submit
            formModal.addEventListener("submit", (e) => {
                e.preventDefault();
                let id = null;

                // Kode add atau edit diolah di sini

                if (formMode.value === "add") {
                    swal({
                        title: "Akun berhasil dibuat!",
                        text: "Kata sandi Anda: 83740593!",
                        icon: "success",
                        button: "Oke!",
                    });
                }

                if (formMode.value === "edit") {
                    id = formModal.querySelector("#id").value;
                    console.log(id);
                }

                // tutup modal ketika kode add / edit berhasil dieksekusi
                document.querySelector(".btn-admin-close").click();
            });
        </script>
    </body>
</html>

<!-- Modal yang bisa dipake Add, edit(1), dan delete(1)

Add
1. Pencet tombol
2. Bersihkan modal
3. Cek mode: add
4. modal lg,Pake form add/edit untuk modal, Ganti judul (aman)
5. Modal muncul
6. Isi form
7. Kirimkan data
8. Alert Data berhasil ditambahkan 
9. Tututp modal

Edit
1. Pencet tombol + kirim data id
2. Bersihkan modal
3. Cek mode: edit
4. modal lg, Pake form add/edit untuk modal, Ganti judul (aman)
5. Get data dari server
6. Tempel data dari server ke form
7. Modal muncul
8. Isi form
9. Kirimkan data
10. Alert data berhasil diubah
11. tutup modal

Delete
1. Pencet tombol + kirim data id
2. Bersihkan modal
3. cek mode: delete
4. modal kecil, pake form konfirmasi, Ganti judul (aman)
	a. Ya, alert data terhapus
	b. tidak, alert data aman
5. Tutup modal   -->
